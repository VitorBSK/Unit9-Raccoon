# ====================================================================================
# Xargo configuration for Unit09 Solana BPF builds
# Path: contracts/unit09-program/Xargo.toml
#
# Notes:
# - Xargo is used to build a custom `std` or `core` for targets that do not ship with
#   a full standard library, such as Solana's BPF target.
# - Modern Anchor/Solana workflows often do not require explicit Xargo configuration,
#   but this file is provided for maximum control and reproducibility.
# ====================================================================================

# ------------------------------------------------------------------------------------
# Target configuration: Solana BPF
#
# The canonical Solana BPF target triple is:
#   bpfel-unknown-unknown
#
# We configure it to use a minimal `std` shim with no OS, I/O, or threading features.
# ------------------------------------------------------------------------------------
[target.bpfel-unknown-unknown.dependencies.std]
features = []
default-features = false

# In case you want to explicitly depend on core/alloc/collections:
[target.bpfel-unknown-unknown.dependencies.core]
features = []
default-features = false

[target.bpfel-unknown-unknown.dependencies.alloc]
features = []
default-features = false

[target.bpfel-unknown-unknown.dependencies.collections]
features = []
default-features = false

# ------------------------------------------------------------------------------------
# Optional panic / unwinding behavior
#
# For Solana BPF programs, panics should abort rather than unwind.
# This is generally configured via Cargo profiles, but we duplicate intent here for
# documentation purposes.
# ------------------------------------------------------------------------------------
[profile.bpf]
# This section is purely informational for Xargo usage patterns.
# Actual panic and optimization behavior is controlled in Cargo.toml profiles.
opt-level = 3

# ------------------------------------------------------------------------------------
# Rust source configuration
#
# If you want to pin a specific Rust source for Xargo (for example in CI), you can
# uncomment the following block and set RUST_SRC_PATH.
#
# Example:
#   export RUST_SRC_PATH=/path/to/rust-src
#
# ------------------------------------------------------------------------------------
# [source]
# path = { env = "RUST_SRC_PATH" }

# ------------------------------------------------------------------------------------
# Feature sets for custom builds
#
# These sections show how you might define named feature sets for different build
# scenarios (for example, benchmarking, fuzzing, or experimental builds).
# They are not used directly by Anchor, but remain here as a reference if you ever
# decide to run pure Xargo workflows.
# ------------------------------------------------------------------------------------

# Minimal feature set for smallest possible BPF footprint
[features.minimal]
description = "Minimal feature set for smallest possible BPF binary size."
std = { default-features = false, features = [] }
core = { default-features = false, features = [] }
alloc = { default-features = false, features = [] }

# Extended feature set for local experiments (not recommended for production)
[features.experimental]
description = "Extended feature set for local experiments only."
std = { default-features = false, features = ["panic_unwind"] }
core = { default-features = false, features = [] }
alloc = { default-features = false, features = [] }

# ------------------------------------------------------------------------------------
# Metadata for documentation and tooling
# ------------------------------------------------------------------------------------
[metadata]
project_name = "Unit09"
target       = "bpfel-unknown-unknown"
usage        = "Anchor / Solana BPF builds with minimal standard library configuration."
repository   = "https://github.com/unit09/unit09-program"
homepage     = "https://unit09.org/"

